<?xml version="1.0"?>
<!--
/**
 * Tapbuy ACL Resources
 *
 * Provides fine-grained access control for Tapbuy GraphQL endpoints.
 * Super-admin users with Tapbuy_RedirectTracking::tapbuy resource get access to all child resources.
 *
 * Backward Compatibility:
 * During the transition period, resolvers accept both legacy Magento resources
 * (e.g., Magento_Sales::actions_view) AND new Tapbuy resources.
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:Acl/etc/acl.xsd">
    <acl>
        <resources>
            <resource id="Magento_Backend::admin">
                <!-- Tapbuy Main Resource (Super-Admin) -->
                <resource id="Tapbuy_RedirectTracking::tapbuy" title="Tapbuy" translate="title" sortOrder="100">

                    <!-- Order Operations -->
                    <resource id="Tapbuy_RedirectTracking::order" title="Order Management" translate="title" sortOrder="10">
                        <resource id="Tapbuy_RedirectTracking::order_view" title="View Orders" translate="title" sortOrder="10"/>
                        <resource id="Tapbuy_RedirectTracking::order_edit" title="Edit Orders" translate="title" sortOrder="20"/>
                        <resource id="Tapbuy_RedirectTracking::order_assign" title="Assign Orders to Customers" translate="title" sortOrder="30"/>
                    </resource>

                    <!-- Cart Operations -->
                    <resource id="Tapbuy_RedirectTracking::cart" title="Cart Management" translate="title" sortOrder="20">
                        <resource id="Tapbuy_RedirectTracking::cart_unlock" title="Unlock Carts" translate="title" sortOrder="10"/>
                        <resource id="Tapbuy_RedirectTracking::cart_deactivate" title="Deactivate Carts" translate="title" sortOrder="20"/>
                    </resource>

                    <!-- Customer Operations -->
                    <resource id="Tapbuy_RedirectTracking::customer" title="Customer Management" translate="title" sortOrder="30">
                        <resource id="Tapbuy_RedirectTracking::customer_search" title="Search Customers" translate="title" sortOrder="10"/>
                        <resource id="Tapbuy_RedirectTracking::customer_view" title="View Customer Data" translate="title" sortOrder="20"/>
                    </resource>

                    <!-- System Operations -->
                    <resource id="Tapbuy_RedirectTracking::system" title="System" translate="title" sortOrder="40">
                        <resource id="Tapbuy_RedirectTracking::modules_versions" title="View Module Versions" translate="title" sortOrder="10"/>
                        <resource id="Tapbuy_RedirectTracking::logs" title="Manage Logs" translate="title" sortOrder="20"/>
                    </resource>

                </resource>
            </resource>
        </resources>
    </acl>
</config>
